{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "env": {
      "type": "object",
      "properties": {
        "type": {
          "const": "env"
        },
        "name": {
          "type": "string"
        },
        "ref": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": ["type", "name", "ref"]
    },
    "stringOrEnv": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/env"
        }
      ]
    },
    "integerOrEnv": {
      "oneOf": [
        {
          "type": "integer"
        },
        {
          "$ref": "#/definitions/env"
        }
      ]
    },
    "adapter": {
      "type": "object",
      "properties": {
        "adapter": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "options": {
          "type": "object"
        }
      },
      "required": ["adapter", "options"],
      "additionalProperties": false
    },
    "jwtCookie": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "maxAge": {
          "$ref": "#/definitions/integerOrEnv"
        }
      },
      "required": ["name", "maxAge"]
    },
    "redux": {
      "type": "object",
      "properties": {
        "store": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "reducers": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "middlewares": {
          "$ref": "#/definitions/stringOrEnv"
        }
      },
      "required": ["store", "reducers", "middlewares"],
      "additionalProperties": false
    },
    "auth": {
      "type": "object",
      "properties": {
        "strategies": {
          "$ref": "#/definitions/stringOrEnv"
        }
      },
      "additionalProperties": false,
      "required": ["strategies"]
    },
    "config": {
      "type": "object",
      "properties": {
        "host": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "port": {
          "$ref": "#/definitions/integerOrEnv"
        },
        "protocol": {
          "$ref": "#/definitions/stringOrEnv",
          "enum": [
            "http",
            "https"
          ]
        },
        "index": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "redux": {
          "$ref": "#/definitions/redux"
        },
        "routes": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "distDir": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "rootPath": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "staticDir": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "staticPath": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "aggregates": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "viewModels": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "readModels": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "sagas": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "bus": {
          "$ref": "#/definitions/adapter"
        },
        "storage": {
          "$ref": "#/definitions/adapter"
        },
        "subscribe": {
          "$ref": "#/definitions/adapter"
        },
        "auth": {
          "$ref": "#/definitions/auth"
        },
        "jwtCookie": {
          "$ref": "#/definitions/jwtCookie"
        },
        "registry": {
          "$ref": "#/definitions/stringOrEnv"
        },
        "env": {
          "type": "object",
          "properties": {
            "development": {
              "$ref": "#/definitions/config"
            },
            "production": {
              "$ref": "#/definitions/config"
            },
            "test": {
              "$ref": "#/definitions/config"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "$ref": "#/definitions/config"
}